<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SmartWatch To-Do List</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #6a11cb;
            --secondary-color: #b721ff;
            --accent-color: #8a2be2;
            --background-color: #f5f0ff;
            --card-color: #ffffff;
            --text-color: #333333;
            --light-text: #777777;
            --shadow: rgba(106, 17, 203, 0.1);
            --success-color: #7b2cbf;
            --border-radius: 12px;
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--background-color);
            color: var(--text-color);
            min-height: 100vh;
            padding: 20px;
            transition: var(--transition);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
            flex-wrap: wrap;
            gap: 15px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo i {
            font-size: 28px;
            color: var(--primary-color);
        }

        .logo h1 {
            font-size: 28px;
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .theme-selector {
            display: flex;
            align-items: center;
            gap: 10px;
            flex-wrap: wrap;
        }

        .theme-selector span {
            font-weight: 600;
            color: var(--accent-color);
        }

        .theme-buttons {
            display: flex;
            gap: 8px;
        }

        .theme-btn {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            border: 2px solid #ddd;
            cursor: pointer;
            transition: var(--transition);
        }

        .theme-btn:hover {
            transform: scale(1.1);
        }

        .theme-btn.active {
            border-color: var(--accent-color);
            transform: scale(1.1);
        }

        .theme-purple {
            background: linear-gradient(to right, #6a11cb, #b721ff);
        }

        .theme-dark {
            background: linear-gradient(to right, #121212, #3a0ca3);
        }

        .theme-blue {
            background: linear-gradient(to right, #4361ee, #4cc9f0);
        }

        .theme-pink {
            background: linear-gradient(to right, #f72585, #7209b7);
        }

        .content-wrapper {
            display: flex;
            gap: 25px;
            flex-wrap: wrap;
        }

        .left-panel, .right-panel {
            flex: 1;
            min-width: 300px;
        }

        .panel {
            background-color: var(--card-color);
            border-radius: var(--border-radius);
            padding: 25px;
            box-shadow: 0 8px 20px var(--shadow);
            transition: var(--transition);
        }

        .panel h2 {
            margin-bottom: 20px;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .panel h2 i {
            font-size: 22px;
        }

        .add-task-form {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 25px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .form-group label {
            font-weight: 600;
            color: var(--accent-color);
        }

        .form-group input, .form-group textarea, .form-group select {
            padding: 12px 15px;
            border: 2px solid #e6d9ff;
            border-radius: 8px;
            font-size: 16px;
            transition: var(--transition);
            background-color: #fcfaff;
            color: inherit;
        }

        .form-group input:focus, .form-group textarea:focus, .form-group select:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 0 0 3px rgba(138, 43, 226, 0.1);
        }

        .btn {
            padding: 12px 20px;
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(106, 17, 203, 0.3);
        }

        .btn:active {
            transform: translateY(0);
        }

        .tasks-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
            max-height: 500px;
            overflow-y: auto;
            padding-right: 10px;
        }

        .task-item {
            background-color: #f9f5ff;
            border-radius: 10px;
            padding: 18px;
            border-left: 5px solid var(--accent-color);
            transition: var(--transition);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .task-item:hover {
            box-shadow: 0 5px 10px rgba(106, 17, 203, 0.1);
            transform: translateY(-2px);
        }

        .task-content {
            flex: 1;
            min-width: 200px;
        }

        .task-title {
            font-weight: 600;
            font-size: 18px;
            margin-bottom: 5px;
            color: var(--primary-color);
        }

        .task-description {
            color: var(--light-text);
            font-size: 14px;
            margin-bottom: 10px;
        }

        .task-category {
            display: inline-block;
            background-color: #e6d9ff;
            color: var(--primary-color);
            padding: 3px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .task-actions {
            display: flex;
            align-items: center;
            gap: 10px;
            flex-wrap: wrap;
        }

        .watch-btn {
            background-color: var(--accent-color);
            color: white;
            border: none;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .watch-btn:hover {
            background-color: var(--primary-color);
            transform: scale(1.05);
        }

        .complete-btn {
            background-color: var(--success-color);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
        }

        .complete-btn:hover {
            background-color: #5a189a;
        }

        /* NEW: delete button */
        .delete-btn {
            background-color: #f44336;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
        }

        .delete-btn:hover {
            background-color: #d32f2f;
        }

        .task-completed {
            opacity: 0.7;
            border-left-color: var(--success-color);
        }

        .task-completed .task-title {
            text-decoration: line-through;
            color: var(--success-color);
        }

        /* Smartwatch Timer Modal */
        .watch-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .watch-modal.active {
            display: flex;
        }

        .watch-container {
            background-color: var(--card-color);
            border-radius: var(--border-radius);
            padding: 30px;
            width: 90%;
            max-width: 400px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .watch-display {
            background: linear-gradient(to bottom right, #121212, #2d2d2d);
            border-radius: 50%;
            width: 200px;
            height: 200px;
            margin: 0 auto 25px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.5), 0 10px 20px rgba(0, 0, 0, 0.3);
            border: 8px solid #3a3a3a;
            position: relative;
        }

        .watch-time {
            font-size: 32px;
            font-weight: 700;
            font-family: 'Courier New', monospace;
            color: #b721ff;
            text-shadow: 0 0 10px rgba(183, 33, 255, 0.7);
            margin-bottom: 10px;
        }

        .watch-task {
            font-size: 14px;
            color: #aaa;
            max-width: 160px;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .watch-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }

        .watch-btn-control {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
        }

        .watch-btn-start {
            background-color: var(--success-color);
            color: white;
        }

        .watch-btn-pause {
            background-color: #ff9800;
            color: white;
        }

        .watch-btn-reset {
            background-color: #f44336;
            color: white;
        }

        .watch-btn-close {
            background-color: #666;
            color: white;
        }

        .stats {
            display: flex;
            justify-content: space-between;
            margin-top: 25px;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 28px;
            font-weight: 700;
            color: var(--primary-color);
        }

        .stat-label {
            font-size: 14px;
            color: var(--light-text);
        }

        /* Scrollbar Styling */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(to bottom, var(--primary-color), var(--secondary-color));
            border-radius: 10px;
        }

        /* Mobile Responsiveness */
        @media (max-width: 768px) {
            .content-wrapper {
                flex-direction: column;
            }
            
            .left-panel, .right-panel {
                width: 100%;
            }
            
            header {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .theme-selector {
                width: 100%;
            }
            
            .watch-display {
                width: 180px;
                height: 180px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <i class="fas fa-clock"></i>
                <h1>SmartWatch To-Do</h1>
            </div>
            <div class="theme-selector">
                <span>Theme:</span>
                <div class="theme-buttons">
                    <div class="theme-btn theme-purple active" data-theme="purple"></div>
                    <div class="theme-btn theme-dark" data-theme="dark"></div>
                    <div class="theme-btn theme-blue" data-theme="blue"></div>
                    <div class="theme-btn theme-pink" data-theme="pink"></div>
                </div>
            </div>
        </header>

        <div class="content-wrapper">
            <div class="left-panel">
                <div class="panel">
                    <h2><i class="fas fa-plus-circle"></i> Add New Task</h2>
                    <form class="add-task-form" id="taskForm">
                        <div class="form-group">
                            <label for="taskTitle">Task Title</label>
                            <input type="text" id="taskTitle" placeholder="Enter task title" required>
                        </div>
                        <div class="form-group">
                            <label for="taskDescription">Description</label>
                            <textarea id="taskDescription" rows="3" placeholder="Enter task description"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="taskCategory">Category</label>
                            <select id="taskCategory">
                                <option value="work">Work</option>
                                <option value="personal">Personal</option>
                                <option value="shopping">Shopping</option>
                                <option value="health">Health & Fitness</option>
                                <option value="learning">Learning</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="taskTime">Time Required (minutes)</label>
                            <input type="number" id="taskTime" min="1" max="240" value="30" required>
                        </div>
                        <button type="submit" class="btn">
                            <i class="fas fa-plus"></i> Add Task
                        </button>
                    </form>
                </div>

                <div class="panel">
                    <h2><i class="fas fa-tasks"></i> Active Tasks</h2>
                    <div class="tasks-container" id="activeTasks">
                        <!-- Active tasks will be added here dynamically -->
                    </div>
                </div>
            </div>

            <div class="right-panel">
                <div class="panel">
                    <h2><i class="fas fa-check-circle"></i> Completed Tasks</h2>
                    <div class="tasks-container" id="completedTasks">
                        <!-- Completed tasks will be added here dynamically -->
                    </div>
                </div>

                <div class="panel">
                    <h2><i class="fas fa-chart-pie"></i> Task Statistics</h2>
                    <div class="stats">
                        <div class="stat-item">
                            <div class="stat-value" id="totalTasks">0</div>
                            <div class="stat-label">Total Tasks</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="completedCount">0</div>
                            <div class="stat-label">Completed</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="activeCount">0</div>
                            <div class="stat-label">Active</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Smartwatch Timer Modal -->
    <div class="watch-modal" id="watchModal">
        <div class="watch-container">
            <div class="watch-display">
                <div class="watch-time" id="watchTime">00:00</div>
                <div class="watch-task" id="watchTask">Task Name</div>
            </div>
            <div class="watch-buttons">
                <button class="watch-btn-control watch-btn-start" id="startBtn">Start</button>
                <button class="watch-btn-control watch-btn-pause" id="pauseBtn">Pause</button>
                <button class="watch-btn-control watch-btn-reset" id="resetBtn">Reset</button>
                <button class="watch-btn-control watch-btn-close" id="closeBtn">Close</button>
            </div>
        </div>
    </div>

    <script>
        // Theme Management
        const themeButtons = document.querySelectorAll('.theme-btn');
        const root = document.documentElement;

        function setBaseThemeVariables() {
            // reset all theme-related vars first (important for switching back from dark)
            root.style.setProperty('--background-color', '#f5f0ff');
            root.style.setProperty('--card-color', '#ffffff');
            root.style.setProperty('--text-color', '#333333');
            root.style.setProperty('--light-text', '#777777');
        }

        themeButtons.forEach(button => {
            button.addEventListener('click', () => {
                themeButtons.forEach(btn => btn.classList.remove('active'));
                button.classList.add('active');
                const theme = button.getAttribute('data-theme');
                applyTheme(theme);
            });
        });

        function applyTheme(theme) {
            // always reset base variables so going from dark -> light works
            setBaseThemeVariables();

            if (theme === 'purple') {
                root.style.setProperty('--primary-color', '#6a11cb');
                root.style.setProperty('--secondary-color', '#b721ff');
                root.style.setProperty('--accent-color', '#8a2be2');
                root.style.setProperty('--success-color', '#7b2cbf');
            } else if (theme === 'dark') {
                root.style.setProperty('--primary-color', '#bb86fc');
                root.style.setProperty('--secondary-color', '#3700b3');
                root.style.setProperty('--accent-color', '#03dac6');
                root.style.setProperty('--background-color', '#0a0a0a');
                root.style.setProperty('--card-color', '#1a1a1a');
                root.style.setProperty('--text-color', '#f0f0f0');
                root.style.setProperty('--light-text', '#aaa');
                root.style.setProperty('--success-color', '#4cc9f0');
            } else if (theme === 'blue') {
                root.style.setProperty('--primary-color', '#4361ee');
                root.style.setProperty('--secondary-color', '#4cc9f0');
                root.style.setProperty('--accent-color', '#4895ef');
                root.style.setProperty('--success-color', '#3a0ca3');
            } else if (theme === 'pink') {
                root.style.setProperty('--primary-color', '#f72585');
                root.style.setProperty('--secondary-color', '#7209b7');
                root.style.setProperty('--accent-color', '#b5179e');
                root.style.setProperty('--success-color', '#560bad');
            }
        }

        // Task Management
        let tasks = JSON.parse(localStorage.getItem('tasks')) || [];
        let taskIdCounter = tasks.length > 0 ? Math.max(...tasks.map(t => t.id)) + 1 : 1;
        
        if (tasks.length === 0) {
            tasks = [
                { id: 1, title: 'Complete Project Proposal', description: 'Finish and submit the project proposal document', category: 'work', time: 45, completed: false, createdAt: new Date().toISOString() },
                { id: 2, title: 'Buy Groceries', description: 'Milk, eggs, bread, fruits, and vegetables', category: 'shopping', time: 30, completed: true, completedAt: new Date().toISOString(), createdAt: new Date(Date.now() - 86400000).toISOString() },
                { id: 3, title: 'Morning Exercise', description: '30 minutes of cardio and stretching', category: 'health', time: 30, completed: false, createdAt: new Date().toISOString() },
                { id: 4, title: 'Read Book Chapter', description: 'Read chapter 5 of "The Design of Everyday Things"', category: 'learning', time: 60, completed: false, createdAt: new Date().toISOString() }
            ];
            taskIdCounter = 5;
            saveTasks();
        }

        const taskForm = document.getElementById('taskForm');
        const activeTasksContainer = document.getElementById('activeTasks');
        const completedTasksContainer = document.getElementById('completedTasks');
        const totalTasksElement = document.getElementById('totalTasks');
        const completedCountElement = document.getElementById('completedCount');
        const activeCountElement = document.getElementById('activeCount');

        function initApp() {
            renderTasks();
            updateStats();
        }

        function saveTasks() {
            localStorage.setItem('tasks', JSON.stringify(tasks));
        }

        function renderTasks() {
            activeTasksContainer.innerHTML = '';
            completedTasksContainer.innerHTML = '';
            
            const activeTasks = tasks.filter(task => !task.completed);
            const completedTasks = tasks.filter(task => task.completed);
            
            activeTasks.forEach(task => {
                const taskElement = createTaskElement(task);
                activeTasksContainer.appendChild(taskElement);
            });
            
            completedTasks.forEach(task => {
                const taskElement = createTaskElement(task);
                completedTasksContainer.appendChild(taskElement);
            });
            
            if (activeTasks.length === 0) {
                activeTasksContainer.innerHTML = '<p style="text-align: center; color: var(--light-text); padding: 20px;">No active tasks. Add a new task to get started!</p>';
            }
            
            if (completedTasks.length === 0) {
                completedTasksContainer.innerHTML = '<p style="text-align: center; color: var(--light-text); padding: 20px;">No completed tasks yet. Complete a task to see it here!</p>';
            }
        }

        function createTaskElement(task) {
            const taskElement = document.createElement('div');
            taskElement.className = `task-item ${task.completed ? 'task-completed' : ''}`;
            taskElement.setAttribute('data-id', task.id);
            
            const categoryColors = {
                work: '#6a11cb',
                personal: '#b721ff',
                shopping: '#ff6b6b',
                health: '#4ecdc4',
                learning: '#ffe66d'
            };
            
            const categoryText = {
                work: 'Work',
                personal: 'Personal',
                shopping: 'Shopping',
                health: 'Health',
                learning: 'Learning'
            };
            
            const accentColor = getComputedStyle(root).getPropertyValue('--accent-color').trim();
            taskElement.style.borderLeftColor = categoryColors[task.category] || accentColor;
            
            taskElement.innerHTML = `
                <div class="task-content">
                    <div class="task-title">${task.title}</div>
                    <div class="task-description">${task.description}</div>
                    <div class="task-category">${categoryText[task.category] || task.category}</div>
                </div>
                <div class="task-actions">
                    ${!task.completed ? `
                        <button class="watch-btn" data-id="${task.id}" title="Start Timer">
                            <i class="fas fa-clock"></i>
                        </button>
                        <button class="complete-btn" data-id="${task.id}">
                            <i class="fas fa-check"></i> Complete
                        </button>
                    ` : `
                        <span style="color: var(--success-color); font-weight: 600;">
                            <i class="fas fa-check-circle"></i> Completed
                        </span>
                    `}
                    <button class="delete-btn" data-id="${task.id}">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
            `;
            
            if (!task.completed) {
                const watchBtn = taskElement.querySelector('.watch-btn');
                const completeBtn = taskElement.querySelector('.complete-btn');
                watchBtn.addEventListener('click', () => openWatchModal(task));
                completeBtn.addEventListener('click', () => completeTask(task.id));
            }

            // attach delete handler for both active and completed
            const deleteBtn = taskElement.querySelector('.delete-btn');
            deleteBtn.addEventListener('click', () => deleteTask(task.id));
            
            return taskElement;
        }

        function updateStats() {
            const totalTasks = tasks.length;
            const completedCount = tasks.filter(task => task.completed).length;
            const activeCount = totalTasks - completedCount;
            
            totalTasksElement.textContent = totalTasks;
            completedCountElement.textContent = completedCount;
            activeCountElement.textContent = activeCount;
        }

        taskForm.addEventListener('submit', (e) => {
            e.preventDefault();
            
            const title = document.getElementById('taskTitle').value.trim();
            const description = document.getElementById('taskDescription').value.trim();
            const category = document.getElementById('taskCategory').value;
            const time = parseInt(document.getElementById('taskTime').value);
            
            if (!title) return;
            
            const newTask = {
                id: taskIdCounter++,
                title,
                description,
                category,
                time,
                completed: false,
                createdAt: new Date().toISOString()
            };
            
            tasks.push(newTask);
            saveTasks();
            renderTasks();
            updateStats();
            
            taskForm.reset();
            document.getElementById('taskTime').value = 30;
            showNotification(`Task "${title}" added successfully!`);
        });

        function completeTask(id) {
            const taskIndex = tasks.findIndex(task => task.id === id);
            if (taskIndex !== -1) {
                tasks[taskIndex].completed = true;
                tasks[taskIndex].completedAt = new Date().toISOString();
                saveTasks();
                renderTasks();
                updateStats();
                showNotification(`Task "${tasks[taskIndex].title}" completed!`);
            }
        }

        // NEW: delete task
        function deleteTask(id) {
            const taskIndex = tasks.findIndex(task => task.id === id);
            if (taskIndex !== -1) {
                const title = tasks[taskIndex].title;
                tasks.splice(taskIndex, 1);
                saveTasks();
                renderTasks();
                updateStats();
                showNotification(`Task "${title}" deleted!`);
            }
        }

        function showNotification(message) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                bottom: 20px;
                right: 20px;
                background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
                color: white;
                padding: 15px 25px;
                border-radius: 8px;
                box-shadow: 0 5px 15px rgba(0,0,0,0.2);
                z-index: 1001;
                font-weight: 600;
                transform: translateY(100px);
                opacity: 0;
                transition: transform 0.3s ease, opacity 0.3s ease;
            `;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.transform = 'translateY(0)';
                notification.style.opacity = '1';
            }, 10);
            
            setTimeout(() => {
                notification.style.transform = 'translateY(100px)';
                notification.style.opacity = '0';
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }

        // Smartwatch Timer Functionality
        const watchModal = document.getElementById('watchModal');
        const watchTimeElement = document.getElementById('watchTime');
        const watchTaskElement = document.getElementById('watchTask');
        const startBtn = document.getElementById('startBtn');
        const pauseBtn = document.getElementById('pauseBtn');
        const resetBtn = document.getElementById('resetBtn');
        const closeBtn = document.getElementById('closeBtn');

        let currentTask = null;
        let timerInterval = null;
        let timeRemaining = 0;
        let isRunning = false;

        function openWatchModal(task) {
            currentTask = task;
            timeRemaining = task.time * 60;
            isRunning = false;
            
            updateWatchDisplay();
            watchTaskElement.textContent = task.title;
            watchModal.classList.add('active');
            
            if (timerInterval) {
                clearInterval(timerInterval);
            }
        }

        function updateWatchDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            watchTimeElement.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        startBtn.addEventListener('click', () => {
            if (!isRunning) {
                isRunning = true;
                startBtn.textContent = 'Resume';
                
                timerInterval = setInterval(() => {
                    if (timeRemaining > 0) {
                        timeRemaining--;
                        updateWatchDisplay();
                        
                        if (timeRemaining === 0) {
                            clearInterval(timerInterval);
                            isRunning = false;
                            showNotification(`Time's up for "${currentTask.title}"!`);
                        }
                    } else {
                        clearInterval(timerInterval);
                        isRunning = false;
                    }
                }, 1000);
            }
        });

        pauseBtn.addEventListener('click', () => {
            if (isRunning) {
                clearInterval(timerInterval);
                isRunning = false;
                startBtn.textContent = 'Start';
            }
        });

        resetBtn.addEventListener('click', () => {
            clearInterval(timerInterval);
            isRunning = false;
            timeRemaining = currentTask.time * 60;
            updateWatchDisplay();
            startBtn.textContent = 'Start';
        });

        closeBtn.addEventListener('click', () => {
            clearInterval(timerInterval);
            watchModal.classList.remove('active');
        });

        watchModal.addEventListener('click', (e) => {
            if (e.target === watchModal) {
                clearInterval(timerInterval);
                watchModal.classList.remove('active');
            }
        });

        document.addEventListener('DOMContentLoaded', () => {
            initApp();
            // ensure default theme is applied on load
            applyTheme('purple');
        });
    </script>
</body>
</html>
